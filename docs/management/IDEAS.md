# アイデア・提案アーカイブ (Custom Feature Ideas & Proposals)

このドキュメントには、「汎用的な土台（Generic Base Kit）」としての思想からは外れるものの、将来的な検討や特定のユースケースにおいて有用なアイデア・提案を保存します。

## 保留中の決定 / 代替アプローチ

### 1. カルテ記録の削除ポリシー
- **優先度**: 🟢 低 (Low) - 議論のみ
- **提案機能**: すべてのカルテ記録を削除可能にする（完全なCRUD）。
- **現在の実装**: `ClinicalRecord` の完全な削除（物理削除）機能を実装済み。
- **代替案の検討**: 
    - **「最新のみ」削除**: 直近の記録のみ削除可能にすることで、「取り消し（Undo）」機能として限定する。安全性は高いが柔軟性に欠ける。
    - **厳格な医療モデル**: 削除を一切許可せず、「訂正（Voiding/Amendment）」と修正履歴（Audit Trail）のみを残す。厳格な電子カルテコンプライアンスで標準的。
- **決定事項 (Phase 9)**: システムを柔軟な「Base Kit」として提供するため、完全な削除機能を実装することを採用。ただし、厳格な運用が必要なケースでは、この機能を制限すべきであるというフィードバックを記録する。
- **アクション**: コードベースでは完全なCRUDを維持しつつ、このトレードオフをドキュメント化して保存する。

---
---

### 2. コンフィグ設定機能（システム設定画面）
- **優先度**: 🟡 中 (Medium) - 検討中
- **提案機能**: アプリケーションの挙動をUIから変更できる「設定ページ」を実装する。
- **具体例**:
    - **予約表示期間**: 「完了した予約」や「過去の予約」をリストから非表示にするタイミング（例: 予約時間の1時間後、当日の終わりなど）をユーザーが分単位で指定できるようにする。
    - **トップページ表示設定**: 「本日の来院予定」パネルでの表示保持時間をカスタマイズ可能にする。
- **現在の実装**: コード内で定数（`-60`分など）としてハードコードされている。
- **メリット**: クリニックごとの運用ルール（すぐに消したい vs 1日は残したい）に柔軟に対応できる。
- **今後の展望**: Phase 10以降での実装を検討。まずは定数化して変更しやすくすることから始めるのが現実的。

---
---

### 3. 文言の変数化（ラベル定義の外出し）による汎用化
- **優先度**: 🔴 高 (High) - **採用決定 (Scheduled)**
- **提案機能**: UI上の文言（「患者」「カルテ」「来院」など）を、設定ファイル（`src/config/labels.ts` 等）で管理し、参照する形に変更する。
- **目的**: 鍼灸・整体以外（例：ジム、サロン、教室など）でも使える「Generic Base Kit」としての再利用性を高めるため。
- **構成案**:
    - フルのi18nライブラリは使用せず、TypeScriptの定数オブジェクトで管理する軽量なアプローチ。
    - 対象：ドメイン用語（`Patient`→顧客、`Record`→日報 など）やボタンラベル。
    - 非対象：助詞や動詞を含む複雑な文章（日本語としての自然さを損なうため）。
- **決定事項**:
    - **v1.2 までは見送り**: 開発スピードとコンテキストスイッチのコストを考慮し、当面はハードコード（日本語直書き）を維持する。
    - **導入タイミング**: v1.2 リリース後、または v2.0 へのメジャーバージョンアップ時のリファクタリングとして実施する。
    - 「遅すぎることはない」という判断のもと、まずは機能実装に集中する。

---
---

### 4. 高度なAI・通知・集計機能 (Future Roadmap Proposals)
- **優先度**: 🟣 将来 (Future)
- **概要**: 初期ロードマップ（Phase 10~11）に含まれていたが、v1.2 "Launch Pad" フェーズでの実装対象から外れた機能群。将来的な拡張候補としてここに記録する。
- **機能リスト**:
    1.  **本日のサマリー**:
        - 内容: AIがその日の予約患者のカルテ傾向を分析し、朝イチで要約を提示する機能。
        - 理由: まずは基本的なCRUD（入力・閲覧）の実用性を優先するため延期。
    2.  **リマインド通知**:
        - 内容: LINE公式アカウントやメール連携APIによる、患者への自動リマインド。
        - 理由: 外部サービス連携が必要になり、ローカル完結の「Base Kit」の範疇を超えるため、プラグイン的な扱いとして再検討が必要。
    3.  **音声入力 (Browser Native)**:
        - 内容: ブラウザの Web Speech API を用いた音声テキスト化。
        - 理由: 精度やOS依存度が大きく、UXを担保するのが難しいため実験的機能（Experimental）扱いとして保留。
    4.  **集計・分析 (Analytics)**:
        - 内容: 月別来院数、売上（今回は会計機能なしだが）、リピート率などのグラフ化。
        - 理由: まずはCSVエクスポート機能を実装し、分析はExcel等に委ねる方が現実的と判断。
