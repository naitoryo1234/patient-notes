# アイデア・機能拡張カタログ (Future Ideas & Customization Catalog)

このドキュメントは、**「汎用的な土台 (Generic Base Kit)」** の範囲外ではあるが、将来のバージョンアップや**「有料カスタマイズ / 上位プラン」** として提案可能な機能アイデアを蓄積する場所です。

これらは、クライアントの特定のニーズに応えるための「ネタ帳」として機能します。

## 💎 カスタム機能 / 上位プラン候補 (Premium Opportunities)
*ビジネス価値が高く、個別開発や上位プランへの誘導材料となりうる機能群*

### 1-1. コンフィグ・設定の高度化
- [ ] **タグ・属性のフルカスタマイズ**:
    - 内容: 「VIP=金」「アレルギー=赤」などの色やアイコン、タグの親子関係を管理画面から自由に設定できる機能。
    - 価値: クリニックごとの独自の患者分類ルールに完全適合するため。
    - 現状: Base Kitでは固定の数色のみ提供。
- [ ] **予約ルールの詳細設定**:
    - 内容: 「初診は30分」「再診は15分」「院長は火曜休み」などの複雑な予約制約の設定。
    - 価値: 受付スタッフのスキルに依存せず、システムが自動でミスを防げるため。

### 1-2. 外部連携・通知
- [ ] **LINE公式アカウント連携**:
    - 内容: 予約リマインド、次回予約の提案などをLINEで自動送信。
    - 価値: キャンセル率の低下、リピート率向上に直結するため非常に需要が高い。
- [ ] **Google Calendar 双方向同期**:
    - 内容: スタッフ個人のカレンダーと予約状況を同期。

### 1-3. 経営分析・マーケティング
- [ ] **休眠患者の掘り起こしリスト**:
    - 内容: 「最終来院から3ヶ月以上」かつ「誕生日が近い」患者を抽出し、DM用CSVを出力。
    - 価値: 直接的な売上向上施策となるため。
- [ ] **スタッフ別売上・指名率分析**:
    - 内容: 誰がどれだけリピートを獲得しているかのレポート。

---

## 🛠️ Base Kit 品質向上 (For Future Updates)
*汎用版としての魅力を高めるために、将来的に標準搭載すべき機能*

### 2-1. UI/UXの洗練
- [ ] **文言の変数化 (i18n ready)**:
    - 内容: `Patient` → `Customer`, `Record` → `Session` のように用語を差し替え可能にする構造。
    - 状況: v1.2以降で実施予定 (技術的負債解消)。
- [ ] **ダークモード完全対応**:
    - 内容: OS設定に連動した配色の切り替え。

---

## 🗑️ 保留 / 却下されたアイデア
*議論の結果、Base Kitには含めないと判断されたもの*

- **カルテの完全削除機能の撤廃**:
    - 理由: Base Kitとしては間違って作ったものを消せる「柔軟性」を重視するため、厳格な医療準拠（訂正のみ許可）は行わない。
- **複雑な権限管理 (RBAC)**:
    - 理由: 小規模クリニックでは「院長とスタッフ」程度の区分けで十分であり、設定コストが見合わないため。

---
**更新ルール**:
開発中に「これはBase Kitには過剰だが便利そうだ」と感じた機能は、コードに実装するのではなく、直ちにこのリストに追加すること。

---

## 📝 2025-12-13 議論ログ

### 保留: 音声入力機能 (Web Speech API)

- **ブランチ**: `feature/voice-input`（マージせず保留中）
- **実装済みコンポーネント**:
  - `src/components/form/VoiceInputButton.tsx`（新規）
  - `src/components/domain/RecordFormContainer.tsx`（統合済み）

#### 技術的な知見
- **Web Speech API** はブラウザ内蔵で**無料**、APIキー不要
- **対応ブラウザ**: Chrome、Edge、Safari（Firefox非対応で自動非表示）
- **実装コスト**: 約0.5日で追加可能

#### 保留理由
- 音声入力だけでは SOAP形式への自動分類ができない
- **中途半端な機能は印象が悪い**（ユーザー判断）
- 現在のベストプラクティス: 「ユーザーが外部AI（Gemini等）で整形 → AI取込モードで貼り付け」

#### 再利用方法
1. `feature/voice-input` ブランチをチェックアウト
2. AI整形機能（OpenAI API等）と組み合わせる場合に復活
3. または、SOAP分割が不要な「シンプル入力モード」と組み合わせ

### 保留: AI音声整形機能
- **内容**: 音声入力 → OpenAI/Claude APIで自動要約・SOAP形式に整形
- **保留理由**: API従量課金のコスト負担が発生するため
- **コンテキスト**: 現役鍼灸師からのフィードバック

### 保留: 予約カレンダービュー
- **内容**: 週/月表示カレンダーで空き確認しやすく
- **保留理由**: 優先度を下げ、ON/OFF設定機能を考慮して設計すべき
- **方針**: シンプルに使いたいニーズもあるため、リスト表示との切替方式を検討

### 検討中: 記録テンプレートの汎用化
- **課題**: 現在のSOAP形式は医療・施術系に特化しており、他業種には合わない
- **提案**:
  - 業種別テンプレート設定機能（医療系=SOAP、美容系=カスタム、シンプル=自由メモ）
  - または「医療・施術系特化」として割り切る
- **重要度**: 高（顧客データ入力は運用の根幹）

### 検討中: 記録への画像添付機能（プラグイン方式）
- **要望元**: 特定顧客からの要望（施術前後の写真記録など）
- **方針**:
  - 記録作成フローには**組み込まない**（シンプルさ維持）
  - **記録後に追加**する形式で実装
  - `RecordList.tsx` の各記録カードに「📷」ボタンを表示
  - ボタンクリック → モーダルで画像アップロード → 記録に紐付け
  - `features.attachments.enabled = false` で完全非表示
- **技術的基盤**:
  - `Attachment` モデルは既に `schema.prisma` に定義済み
  - `ClinicalRecord` → `Attachment[]` リレーションも設定済み
- **実装コスト**: 中（1日程度）
- **ステータス**: 検討中、顧客ニーズに応じて実装可能

