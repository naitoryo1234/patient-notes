# 🧪 動作確認手順書: ダッシュボード (Dashboard)

## 📌 概要
本ドキュメントは、ダッシュボード画面（`/`）の動作確認手順と期待される挙動を定義します。

---

## 1. 本日の予約パネル (DailyAppointmentPanel)

### 1-1. 予約一覧の表示
| ID | 項目 | 手順 / 条件 | 期待される挙動 |
|:---|:---|:---|:---|
| DA-01 | **基本表示** | ダッシュボードにアクセスする。<br>本日の予約データが存在すること。 | ・左側パネルに「本日の予定」として予約一覧が表示される。<br>・予約時間、患者名、担当者が表示される。 |
| DA-02 | **時間順ソート** | 複数の予約が存在する状態でパネルを表示する。 | ・予約が開始時間の昇順でソートされている。 |
| DA-03 | **担当者未定警告** | 担当者が未設定の予約が存在する場合。 | ・該当カードに警告色（赤系のボーダーまたはアイコン）が表示される。 |
| DA-04 | **申し送りアラート** | 未確認の申し送り（adminMemo）がある予約が存在する場合。 | ・パネル上部に「本日の未確認申し送り: X件」のアラートが表示される。<br>・該当カードに⚠️アイコンが表示される。 |
| DA-05 | **自動更新** | パネルを表示したまま1分間待機する。 | ・1分経過後、パネル内容が自動的に更新される（最新データが反映される）。 |

### 1-2. 来院チェックイン (Check-in)
| ID | 項目 | 手順 / 条件 | 期待される挙動 |
|:---|:---|:---|:---|
| DA-06 | **受付ボタン** | ステータスが `scheduled` の予約カードの「受付」ボタンをクリックする。 | ・ステータスが `arrived` に変更される。<br>・カードの表示が変化する（背景色変更など）。<br>・`arrivedAt` に現在日時が記録される。 |
| DA-07 | **完了ボタン** | ステータスが `arrived` の予約カードの「完了」ボタンをクリックする。 | ・ステータスが `completed` に変更される。<br>・カードがリストから非表示になる（または完了表示に変わる）。 |

### 1-3. 時間経過後の挙動
| ID | 項目 | 手順 / 条件 | 期待される挙動 |
|:---|:---|:---|:---|
| DA-08 | **時間超過維持** | 予約時間が過ぎた（例：10:00の予約で現在10:30）が、完了処理されていない予約がある場合。 | ・該当予約がリストに残り続ける。<br>・「受付」「完了」ボタンが引き続き操作可能。 |

---

## 2. 患者検索パネル (PatientSearchPanel)

### 2-1. 検索機能
| ID | 項目 | 手順 / 条件 | 期待される挙動 |
|:---|:---|:---|:---|
| PS-01 | **フリガナ検索** | 検索ボックスに「ヤマダ」と入力する。 | ・フリガナに「ヤマダ」を含む患者が検索結果に表示される。<br>・ひらがな「やまだ」でも同様に検索可能（かな互換）。 |
| PS-02 | **診察券番号検索** | 検索ボックスに診察券番号（例：「1001」）を入力する。 | ・該当する診察券番号の患者が検索結果に表示される。 |
| PS-03 | **部分一致** | 「タ」と1文字だけ入力する。 | ・フリガナに「タ」を含む全ての患者が表示される。 |
| PS-04 | **結果なし** | 存在しない名前（例：「zzzzz」）を入力する。 | ・「該当する患者が見つかりません」等のメッセージが表示される。 |

### 2-2. タブ切り替え
| ID | 項目 | 手順 / 条件 | 期待される挙動 |
|:---|:---|:---|:---|
| PS-05 | **最近アクセス** | 「最近」タブをクリックする。 | ・最近アクセスした患者の一覧が表示される。<br>・アクセス順にソートされている。 |
| PS-06 | **申し送り（Attention）** | 「要確認」タブをクリックする。 | ・未解決の申し送りがある予約に関連する患者が表示される。<br>・解決済みの申し送り履歴も表示される（解決者名・日時付き）。 |

### 2-3. 患者カードの操作
| ID | 項目 | 手順 / 条件 | 期待される挙動 |
|:---|:---|:---|:---|
| PS-07 | **詳細ページ遷移** | 検索結果の患者カードをクリックする。 | ・患者詳細ページ（`/patients/[id]`）に遷移する。 |

---

## 3. ナビゲーション

| ID | 項目 | 手順 / 条件 | 期待される挙動 |
|:---|:---|:---|:---|
| NAV-01 | **ヘッダー表示** | ダッシュボードのヘッダーを確認する。 | ・アプリ名（Customer Notebook）が表示される。<br>・ナビゲーションリンク（ダッシュボード、予約管理、設定）が表示される。 |
| NAV-02 | **ログイン状態表示** | 認証有効(`AUTH_ENABLED=true`)でログイン後、ヘッダーを確認する。 | ・ログインユーザー名が表示される。<br>・ログアウトボタンが表示される。 |

---

## ✅ テスト実施記録

| ID | 結果 | 実施日時 | 実施者 | 備考 |
|:---|:---:|:---|:---|:---|
| DA-01 | ⬜ | - | - | - |
| DA-02 | ⬜ | - | - | - |
| DA-03 | ⬜ | - | - | - |
| DA-04 | ⬜ | - | - | - |
| DA-05 | ⬜ | - | - | - |
| DA-06 | ✅ | 2025-12-15 12:00 | System | Browser Automation |
| DA-07 | ✅ | 2025-12-15 12:00 | System | Browser Automation |
| DA-08 | ⬜ | - | - | - |
| PS-01 | ⬜ | - | - | - |
| PS-02 | ⬜ | - | - | - |
| PS-03 | ⬜ | - | - | - |
| PS-04 | ⬜ | - | - | - |
| PS-05 | ⬜ | - | - | - |
| PS-06 | ⬜ | - | - | - |
| PS-07 | ⬜ | - | - | - |
| NAV-01 | ⬜ | - | - | - |
| NAV-02 | ⬜ | - | - | - |

**凡例**: ✅ = 通過 / ❌ = 失敗 / ⬜ = 未実施

